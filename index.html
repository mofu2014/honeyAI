<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>AI Image Generator</title>
</head>
<body>

<h2>画像生成</h2>

<input id="prompt" placeholder="プロンプト入力">
<button onclick="generateImage()">生成</button>

<br><br>
<img id="output" width="512">

<script>
async function generateImage() {

  const prompt = document.getElementById("prompt").value;

  const response = await fetch("/api/image", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ prompt })
  });

  if (!response.ok) {
    console.log(await response.text());
    alert("エラー出てる。コンソール見て。");
    return;
  }

  const blob = await response.blob();
  const imgURL = URL.createObjectURL(blob);

  document.getElementById("output").src = imgURL;
}
</script>

</body>
</html>
